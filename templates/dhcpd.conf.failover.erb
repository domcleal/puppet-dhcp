# failover
failover peer "dhcp-failover" {
  <%= @role %>;
  address <%= @address %>;
  port <%= @port %>;
  peer address <%= @peer_address %>;
  peer port <%= @port %>;
  max-response-delay <%= @max_response_delay %>;
  max-unacked-updates <%= @max_unacked_updates %>;
  load balance max seconds <%= @load_balance %>;
<% if @role == "primary" -%>
  mclt <%= @mclt %>;
  split <%= @load_split %>;
<% end -%>
}

<%# This just moves the includes from dhcp.conf.erb to here so that any
includes that involve failover pools won't fail. -%>
<% if @includes.is_a? Array -%>
<% @includes.each do |include| -%>
include "<%= include %>";
<% end -%>
<% elsif @includes && !@includes.strip.empty? -%>
include "<%= @includes %>";
<% end -%>
